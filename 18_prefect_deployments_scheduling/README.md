# ðŸ“¦ Prefect Deployments & Scheduling

This module shows how to **deploy** your Prefect flow (`etl_with_validation`) with a **schedule** and **parameters**.

## Files
- `task.md` â€” scope & runbook
- `etl_with_validation-deployment.yaml` â€” generated by the CLI (you will produce it)
- `params_example.json` â€” example parameters for runs

## Quick Start
```bash
# Start an agent
prefect agent start -q default

# Build a deployment with a daily schedule at 09:00
prefect deployment build prefect_data_validation.py:etl_with_validation \
  -n daily-9am -q default \
  --params @17_prefect_deployments/params_example.json \
  --cron "0 9 * * *" \
  -o 17_prefect_deployments/etl_with_validation-deployment.yaml

# Apply it
prefect deployment apply 17_prefect_deployments/etl_with_validation-deployment.yaml

# Manually trigger
prefect deployment run 'etl_with_validation/daily-9am'
```

## params_example.json
Use this to store parameters for your deployment/runs:
```json
{
  "tax_rate": 1.2,
  "input_path": "data/source_data.csv",
  "output_path": "data/final_data.csv",
  "required_columns": ["Month", "Revenue"],
  "numeric_nonneg_cols": ["Revenue"]
}
```

## Notes
- Ensure `prefect_data_validation.py` is present in the repo root or adjust the import path.
- In Prefect Cloud, create a **Work Pool/Queue** and use its name instead of `default`.
- For timezones in cron schedules, configure them in your deployment or use parameterized scheduling.
